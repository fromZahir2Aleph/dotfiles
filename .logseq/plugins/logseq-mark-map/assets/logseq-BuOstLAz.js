var jn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ko(be){return be&&be.__esModule&&Object.prototype.hasOwnProperty.call(be,"default")?be.default:be}var An={exports:{}};/*! For license information please see lsplugin.user.js.LICENSE.txt */An.exports;(function(be,qe){(function(rr,Xt){be.exports=Xt()})(self,()=>(()=>{var rr={227:(H,h,S)=>{var I=S(155);h.formatArgs=function(L){if(L[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+L[0]+(this.useColors?"%c ":" ")+"+"+H.exports.humanize(this.diff),!this.useColors)return;const Z="color: "+this.color;L.splice(1,0,Z,"color: inherit");let v=0,p=0;L[0].replace(/%[a-zA-Z%]/g,y=>{y!=="%%"&&(v++,y==="%c"&&(p=v))}),L.splice(p,0,Z)},h.save=function(L){try{L?h.storage.setItem("debug",L):h.storage.removeItem("debug")}catch{}},h.load=function(){let L;try{L=h.storage.getItem("debug")}catch{}return!L&&I!==void 0&&"env"in I&&(L=I.env.DEBUG),L},h.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},h.storage=function(){try{return localStorage}catch{}}(),h.destroy=(()=>{let L=!1;return()=>{L||(L=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),h.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],h.log=console.debug||console.log||(()=>{}),H.exports=S(447)(h);const{formatters:C}=H.exports;C.j=function(L){try{return JSON.stringify(L)}catch(Z){return"[UnexpectedJSONParseError]: "+Z.message}}},447:(H,h,S)=>{H.exports=function(I){function C(v){let p,y,b,R=null;function F(...D){if(!F.enabled)return;const B=F,A=Number(new Date),N=A-(p||A);B.diff=N,B.prev=p,B.curr=A,p=A,D[0]=C.coerce(D[0]),typeof D[0]!="string"&&D.unshift("%O");let s=0;D[0]=D[0].replace(/%([a-zA-Z%])/g,(l,m)=>{if(l==="%%")return"%";s++;const x=C.formatters[m];if(typeof x=="function"){const q=D[s];l=x.call(B,q),D.splice(s,1),s--}return l}),C.formatArgs.call(B,D),(B.log||C.log).apply(B,D)}return F.namespace=v,F.useColors=C.useColors(),F.color=C.selectColor(v),F.extend=L,F.destroy=C.destroy,Object.defineProperty(F,"enabled",{enumerable:!0,configurable:!1,get:()=>R!==null?R:(y!==C.namespaces&&(y=C.namespaces,b=C.enabled(v)),b),set:D=>{R=D}}),typeof C.init=="function"&&C.init(F),F}function L(v,p){const y=C(this.namespace+(p===void 0?":":p)+v);return y.log=this.log,y}function Z(v){return v.toString().substring(2,v.toString().length-2).replace(/\.\*\?$/,"*")}return C.debug=C,C.default=C,C.coerce=function(v){return v instanceof Error?v.stack||v.message:v},C.disable=function(){const v=[...C.names.map(Z),...C.skips.map(Z).map(p=>"-"+p)].join(",");return C.enable(""),v},C.enable=function(v){let p;C.save(v),C.namespaces=v,C.names=[],C.skips=[];const y=(typeof v=="string"?v:"").split(/[\s,]+/),b=y.length;for(p=0;p<b;p++)y[p]&&((v=y[p].replace(/\*/g,".*?"))[0]==="-"?C.skips.push(new RegExp("^"+v.slice(1)+"$")):C.names.push(new RegExp("^"+v+"$")))},C.enabled=function(v){if(v[v.length-1]==="*")return!0;let p,y;for(p=0,y=C.skips.length;p<y;p++)if(C.skips[p].test(v))return!1;for(p=0,y=C.names.length;p<y;p++)if(C.names[p].test(v))return!0;return!1},C.humanize=S(824),C.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(I).forEach(v=>{C[v]=I[v]}),C.names=[],C.skips=[],C.formatters={},C.selectColor=function(v){let p=0;for(let y=0;y<v.length;y++)p=(p<<5)-p+v.charCodeAt(y),p|=0;return C.colors[Math.abs(p)%C.colors.length]},C.enable(C.load()),C}},856:function(H){H.exports=function(){function h(w){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},h(w)}function S(w,j){return S=Object.setPrototypeOf||function(U,J){return U.__proto__=J,U},S(w,j)}function I(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function C(w,j,U){return C=I()?Reflect.construct:function(J,ne,Ie){var We=[null];We.push.apply(We,ne);var Fe=new(Function.bind.apply(J,We));return Ie&&S(Fe,Ie.prototype),Fe},C.apply(null,arguments)}function L(w){return Z(w)||v(w)||p(w)||b()}function Z(w){if(Array.isArray(w))return y(w)}function v(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}function p(w,j){if(w){if(typeof w=="string")return y(w,j);var U=Object.prototype.toString.call(w).slice(8,-1);return U==="Object"&&w.constructor&&(U=w.constructor.name),U==="Map"||U==="Set"?Array.from(w):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?y(w,j):void 0}}function y(w,j){(j==null||j>w.length)&&(j=w.length);for(var U=0,J=new Array(j);U<j;U++)J[U]=w[U];return J}function b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var R=Object.hasOwnProperty,F=Object.setPrototypeOf,D=Object.isFrozen,B=Object.getPrototypeOf,A=Object.getOwnPropertyDescriptor,N=Object.freeze,s=Object.seal,l=Object.create,m=typeof Reflect<"u"&&Reflect,x=m.apply,q=m.construct;x||(x=function(w,j,U){return w.apply(j,U)}),N||(N=function(w){return w}),s||(s=function(w){return w}),q||(q=function(w,j){return C(w,L(j))});var V=K(Array.prototype.forEach),te=K(Array.prototype.pop),fe=K(Array.prototype.push),ge=K(String.prototype.toLowerCase),ve=K(String.prototype.match),se=K(String.prototype.replace),ke=K(String.prototype.indexOf),f=K(String.prototype.trim),g=K(RegExp.prototype.test),M=_e(TypeError);function K(w){return function(j){for(var U=arguments.length,J=new Array(U>1?U-1:0),ne=1;ne<U;ne++)J[ne-1]=arguments[ne];return x(w,j,J)}}function _e(w){return function(){for(var j=arguments.length,U=new Array(j),J=0;J<j;J++)U[J]=arguments[J];return q(w,U)}}function P(w,j){F&&F(w,null);for(var U=j.length;U--;){var J=j[U];if(typeof J=="string"){var ne=ge(J);ne!==J&&(D(j)||(j[U]=ne),J=ne)}w[J]=!0}return w}function W(w){var j,U=l(null);for(j in w)x(R,w,[j])&&(U[j]=w[j]);return U}function oe(w,j){for(;w!==null;){var U=A(w,j);if(U){if(U.get)return K(U.get);if(typeof U.value=="function")return K(U.value)}w=B(w)}function J(ne){return console.warn("fallback value for",ne),null}return J}var Oe=N(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),we=N(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ue=N(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ve=N(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ae=N(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ie=N(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),xe=N(["#text"]),Ce=N(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),je=N(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ee=N(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Me=N(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Lt=s(/\{\{[\w\W]*|[\w\W]*\}\}/gm),yt=s(/<%[\w\W]*|[\w\W]*%>/gm),En=s(/^data-[\-\w.\u00B7-\uFFFF]/),Tn=s(/^aria-[\-\w]+$/),In=s(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Fn=s(/^(?:\w+script|data):/i),Ke=s(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),en=s(/^html$/i),Ln=function(){return typeof window>"u"?null:window},Nn=function(w,j){if(h(w)!=="object"||typeof w.createPolicy!="function")return null;var U=null,J="data-tt-policy-suffix";j.currentScript&&j.currentScript.hasAttribute(J)&&(U=j.currentScript.getAttribute(J));var ne="dompurify"+(U?"#"+U:"");try{return w.createPolicy(ne,{createHTML:function(Ie){return Ie}})}catch{return console.warn("TrustedTypes policy "+ne+" could not be created."),null}};function st(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ln(),j=function(o){return st(o)};if(j.version="2.3.8",j.removed=[],!w||!w.document||w.document.nodeType!==9)return j.isSupported=!1,j;var U=w.document,J=w.document,ne=w.DocumentFragment,Ie=w.HTMLTemplateElement,We=w.Node,Fe=w.Element,Ge=w.NodeFilter,at=w.NamedNodeMap,bt=at===void 0?w.NamedNodeMap||w.MozNamedAttrMap:at,Nt=w.HTMLFormElement,tn=w.DOMParser,nn=w.trustedTypes,ct=Fe.prototype,rn=oe(ct,"cloneNode"),Mn=oe(ct,"nextSibling"),_t=oe(ct,"childNodes"),Mt=oe(ct,"parentNode");if(typeof Ie=="function"){var Pt=J.createElement("template");Pt.content&&Pt.content.ownerDocument&&(J=Pt.content.ownerDocument)}var $e=Nn(nn,U),Rt=$e?$e.createHTML(""):"",wt=J,xt=wt.implementation,on=wt.createNodeIterator,Pn=wt.createDocumentFragment,Dt=wt.getElementsByTagName,Rn=U.importNode,Pe={};try{Pe=W(J).documentMode?J.documentMode:{}}catch{}var Te={};j.isSupported=typeof Mt=="function"&&xt&&xt.createHTMLDocument!==void 0&&Pe!==9;var Ye,Je,Ut=Lt,Qe=yt,Ae=En,$t=Tn,Ct=Fn,sn=Ke,zt=In,ue=null,Ht=P({},[].concat(L(Oe),L(we),L(Ue),L(ae),L(xe))),pe=null,lt=P({},[].concat(L(Ce),L(je),L(Ee),L(Me))),ce=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ut=null,Ot=null,an=!0,Bt=!0,cn=!1,Y=!1,Ze=!1,qt=!1,St=!1,Le=!1,Xe=!1,ft=!1,Wt=!0,pt=!0,et=!1,tt={},nt=null,ln=P({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),un=null,fn=P({},["audio","video","img","source","image","track"]),ht=null,pn=P({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),jt="http://www.w3.org/1998/Math/MathML",Gt="http://www.w3.org/2000/svg",ze="http://www.w3.org/1999/xhtml",At=ze,Jt=!1,Dn=["application/xhtml+xml","text/html"],Un="text/html",rt=null,Zt=J.createElement("form"),hn=function(o){return o instanceof RegExp||o instanceof Function},kt=function(o){rt&&rt===o||(o&&h(o)==="object"||(o={}),o=W(o),ue="ALLOWED_TAGS"in o?P({},o.ALLOWED_TAGS):Ht,pe="ALLOWED_ATTR"in o?P({},o.ALLOWED_ATTR):lt,ht="ADD_URI_SAFE_ATTR"in o?P(W(pn),o.ADD_URI_SAFE_ATTR):pn,un="ADD_DATA_URI_TAGS"in o?P(W(fn),o.ADD_DATA_URI_TAGS):fn,nt="FORBID_CONTENTS"in o?P({},o.FORBID_CONTENTS):ln,ut="FORBID_TAGS"in o?P({},o.FORBID_TAGS):{},Ot="FORBID_ATTR"in o?P({},o.FORBID_ATTR):{},tt="USE_PROFILES"in o&&o.USE_PROFILES,an=o.ALLOW_ARIA_ATTR!==!1,Bt=o.ALLOW_DATA_ATTR!==!1,cn=o.ALLOW_UNKNOWN_PROTOCOLS||!1,Y=o.SAFE_FOR_TEMPLATES||!1,Ze=o.WHOLE_DOCUMENT||!1,Le=o.RETURN_DOM||!1,Xe=o.RETURN_DOM_FRAGMENT||!1,ft=o.RETURN_TRUSTED_TYPE||!1,St=o.FORCE_BODY||!1,Wt=o.SANITIZE_DOM!==!1,pt=o.KEEP_CONTENT!==!1,et=o.IN_PLACE||!1,zt=o.ALLOWED_URI_REGEXP||zt,At=o.NAMESPACE||ze,o.CUSTOM_ELEMENT_HANDLING&&hn(o.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ce.tagNameCheck=o.CUSTOM_ELEMENT_HANDLING.tagNameCheck),o.CUSTOM_ELEMENT_HANDLING&&hn(o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ce.attributeNameCheck=o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),o.CUSTOM_ELEMENT_HANDLING&&typeof o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ce.allowCustomizedBuiltInElements=o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ye=Ye=Dn.indexOf(o.PARSER_MEDIA_TYPE)===-1?Un:o.PARSER_MEDIA_TYPE,Je=Ye==="application/xhtml+xml"?function(O){return O}:ge,Y&&(Bt=!1),Xe&&(Le=!0),tt&&(ue=P({},L(xe)),pe=[],tt.html===!0&&(P(ue,Oe),P(pe,Ce)),tt.svg===!0&&(P(ue,we),P(pe,je),P(pe,Me)),tt.svgFilters===!0&&(P(ue,Ue),P(pe,je),P(pe,Me)),tt.mathMl===!0&&(P(ue,ae),P(pe,Ee),P(pe,Me))),o.ADD_TAGS&&(ue===Ht&&(ue=W(ue)),P(ue,o.ADD_TAGS)),o.ADD_ATTR&&(pe===lt&&(pe=W(pe)),P(pe,o.ADD_ATTR)),o.ADD_URI_SAFE_ATTR&&P(ht,o.ADD_URI_SAFE_ATTR),o.FORBID_CONTENTS&&(nt===ln&&(nt=W(nt)),P(nt,o.FORBID_CONTENTS)),pt&&(ue["#text"]=!0),Ze&&P(ue,["html","head","body"]),ue.table&&(P(ue,["tbody"]),delete ut.tbody),N&&N(o),rt=o)},dn=P({},["mi","mo","mn","ms","mtext"]),mn=P({},["foreignobject","desc","title","annotation-xml"]),$n=P({},["title","style","font","a","script"]),Et=P({},we);P(Et,Ue),P(Et,Ve);var Vt=P({},ae);P(Vt,ie);var zn=function(o){var O=Mt(o);O&&O.tagName||(O={namespaceURI:ze,tagName:"template"});var _=ge(o.tagName),X=ge(O.tagName);return o.namespaceURI===Gt?O.namespaceURI===ze?_==="svg":O.namespaceURI===jt?_==="svg"&&(X==="annotation-xml"||dn[X]):!!Et[_]:o.namespaceURI===jt?O.namespaceURI===ze?_==="math":O.namespaceURI===Gt?_==="math"&&mn[X]:!!Vt[_]:o.namespaceURI===ze&&!(O.namespaceURI===Gt&&!mn[X])&&!(O.namespaceURI===jt&&!dn[X])&&!Vt[_]&&($n[_]||!Et[_])},Re=function(o){fe(j.removed,{element:o});try{o.parentNode.removeChild(o)}catch{try{o.outerHTML=Rt}catch{o.remove()}}},gn=function(o,O){try{fe(j.removed,{attribute:O.getAttributeNode(o),from:O})}catch{fe(j.removed,{attribute:null,from:O})}if(O.removeAttribute(o),o==="is"&&!pe[o])if(Le||Xe)try{Re(O)}catch{}else try{O.setAttribute(o,"")}catch{}},dt=function(o){var O,_;if(St)o="<remove></remove>"+o;else{var X=ve(o,/^[\r\n\t ]+/);_=X&&X[0]}Ye==="application/xhtml+xml"&&(o='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+o+"</body></html>");var re=$e?$e.createHTML(o):o;if(At===ze)try{O=new tn().parseFromString(re,Ye)}catch{}if(!O||!O.documentElement){O=xt.createDocument(At,"template",null);try{O.documentElement.innerHTML=Jt?"":re}catch{}}var ye=O.body||O.documentElement;return o&&_&&ye.insertBefore(J.createTextNode(_),ye.childNodes[0]||null),At===ze?Dt.call(O,Ze?"html":"body")[0]:Ze?O.documentElement:ye},vn=function(o){return on.call(o.ownerDocument||o,o,Ge.SHOW_ELEMENT|Ge.SHOW_COMMENT|Ge.SHOW_TEXT,null,!1)},Hn=function(o){return o instanceof Nt&&(typeof o.nodeName!="string"||typeof o.textContent!="string"||typeof o.removeChild!="function"||!(o.attributes instanceof bt)||typeof o.removeAttribute!="function"||typeof o.setAttribute!="function"||typeof o.namespaceURI!="string"||typeof o.insertBefore!="function")},mt=function(o){return h(We)==="object"?o instanceof We:o&&h(o)==="object"&&typeof o.nodeType=="number"&&typeof o.nodeName=="string"},Ne=function(o,O,_){Te[o]&&V(Te[o],function(X){X.call(j,O,_,rt)})},yn=function(o){var O;if(Ne("beforeSanitizeElements",o,null),Hn(o)||g(/[\u0080-\uFFFF]/,o.nodeName))return Re(o),!0;var _=Je(o.nodeName);if(Ne("uponSanitizeElement",o,{tagName:_,allowedTags:ue}),o.hasChildNodes()&&!mt(o.firstElementChild)&&(!mt(o.content)||!mt(o.content.firstElementChild))&&g(/<[/\w]/g,o.innerHTML)&&g(/<[/\w]/g,o.textContent)||_==="select"&&g(/<template/i,o.innerHTML))return Re(o),!0;if(!ue[_]||ut[_]){if(!ut[_]&&gt(_)&&(ce.tagNameCheck instanceof RegExp&&g(ce.tagNameCheck,_)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(_)))return!1;if(pt&&!nt[_]){var X=Mt(o)||o.parentNode,re=_t(o)||o.childNodes;if(re&&X)for(var ye=re.length-1;ye>=0;--ye)X.insertBefore(rn(re[ye],!0),Mn(o))}return Re(o),!0}return o instanceof Fe&&!zn(o)?(Re(o),!0):_!=="noscript"&&_!=="noembed"||!g(/<\/no(script|embed)/i,o.innerHTML)?(Y&&o.nodeType===3&&(O=o.textContent,O=se(O,Ut," "),O=se(O,Qe," "),o.textContent!==O&&(fe(j.removed,{element:o.cloneNode()}),o.textContent=O)),Ne("afterSanitizeElements",o,null),!1):(Re(o),!0)},Kt=function(o,O,_){if(Wt&&(O==="id"||O==="name")&&(_ in J||_ in Zt))return!1;if(!(Bt&&!Ot[O]&&g(Ae,O))){if(!(an&&g($t,O))){if(!pe[O]||Ot[O]){if(!(gt(o)&&(ce.tagNameCheck instanceof RegExp&&g(ce.tagNameCheck,o)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(o))&&(ce.attributeNameCheck instanceof RegExp&&g(ce.attributeNameCheck,O)||ce.attributeNameCheck instanceof Function&&ce.attributeNameCheck(O))||O==="is"&&ce.allowCustomizedBuiltInElements&&(ce.tagNameCheck instanceof RegExp&&g(ce.tagNameCheck,_)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(_))))return!1}else if(!ht[O]){if(!g(zt,se(_,sn,""))){if((O!=="src"&&O!=="xlink:href"&&O!=="href"||o==="script"||ke(_,"data:")!==0||!un[o])&&!(cn&&!g(Ct,se(_,sn,"")))){if(_)return!1}}}}}return!0},gt=function(o){return o.indexOf("-")>0},Tt=function(o){var O,_,X,re;Ne("beforeSanitizeAttributes",o,null);var ye=o.attributes;if(ye){var he={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:pe};for(re=ye.length;re--;){var ot=O=ye[re],Q=ot.name,de=ot.namespaceURI;if(_=Q==="value"?O.value:f(O.value),X=Je(Q),he.attrName=X,he.attrValue=_,he.keepAttr=!0,he.forceKeepAttr=void 0,Ne("uponSanitizeAttribute",o,he),_=he.attrValue,!he.forceKeepAttr&&(gn(Q,o),he.keepAttr))if(g(/\/>/i,_))gn(Q,o);else{Y&&(_=se(_,Ut," "),_=se(_,Qe," "));var Bn=Je(o.nodeName);if(Kt(Bn,X,_))try{de?o.setAttributeNS(de,Q,_):o.setAttribute(Q,_),te(j.removed)}catch{}}}Ne("afterSanitizeAttributes",o,null)}},bn=function o(O){var _,X=vn(O);for(Ne("beforeSanitizeShadowDOM",O,null);_=X.nextNode();)Ne("uponSanitizeShadowNode",_,null),yn(_)||(_.content instanceof ne&&o(_.content),Tt(_));Ne("afterSanitizeShadowDOM",O,null)};return j.sanitize=function(o,O){var _,X,re,ye,he;if((Jt=!o)&&(o="<!-->"),typeof o!="string"&&!mt(o)){if(typeof o.toString!="function")throw M("toString is not a function");if(typeof(o=o.toString())!="string")throw M("dirty is not a string, aborting")}if(!j.isSupported){if(h(w.toStaticHTML)==="object"||typeof w.toStaticHTML=="function"){if(typeof o=="string")return w.toStaticHTML(o);if(mt(o))return w.toStaticHTML(o.outerHTML)}return o}if(qt||kt(O),j.removed=[],typeof o=="string"&&(et=!1),et){if(o.nodeName){var ot=Je(o.nodeName);if(!ue[ot]||ut[ot])throw M("root node is forbidden and cannot be sanitized in-place")}}else if(o instanceof We)(X=(_=dt("<!---->")).ownerDocument.importNode(o,!0)).nodeType===1&&X.nodeName==="BODY"||X.nodeName==="HTML"?_=X:_.appendChild(X);else{if(!Le&&!Y&&!Ze&&o.indexOf("<")===-1)return $e&&ft?$e.createHTML(o):o;if(!(_=dt(o)))return Le?null:ft?Rt:""}_&&St&&Re(_.firstChild);for(var Q=vn(et?o:_);re=Q.nextNode();)re.nodeType===3&&re===ye||yn(re)||(re.content instanceof ne&&bn(re.content),Tt(re),ye=re);if(ye=null,et)return o;if(Le){if(Xe)for(he=Pn.call(_.ownerDocument);_.firstChild;)he.appendChild(_.firstChild);else he=_;return pe.shadowroot&&(he=Rn.call(U,he,!0)),he}var de=Ze?_.outerHTML:_.innerHTML;return Ze&&ue["!doctype"]&&_.ownerDocument&&_.ownerDocument.doctype&&_.ownerDocument.doctype.name&&g(en,_.ownerDocument.doctype.name)&&(de="<!DOCTYPE "+_.ownerDocument.doctype.name+`>
`+de),Y&&(de=se(de,Ut," "),de=se(de,Qe," ")),$e&&ft?$e.createHTML(de):de},j.setConfig=function(o){kt(o),qt=!0},j.clearConfig=function(){rt=null,qt=!1},j.isValidAttribute=function(o,O,_){rt||kt({});var X=Je(o),re=Je(O);return Kt(X,re,_)},j.addHook=function(o,O){typeof O=="function"&&(Te[o]=Te[o]||[],fe(Te[o],O))},j.removeHook=function(o){if(Te[o])return te(Te[o])},j.removeHooks=function(o){Te[o]&&(Te[o]=[])},j.removeAllHooks=function(){Te={}},j}return st()}()},729:H=>{var h=Object.prototype.hasOwnProperty,S="~";function I(){}function C(p,y,b){this.fn=p,this.context=y,this.once=b||!1}function L(p,y,b,R,F){if(typeof b!="function")throw new TypeError("The listener must be a function");var D=new C(b,R||p,F),B=S?S+y:y;return p._events[B]?p._events[B].fn?p._events[B]=[p._events[B],D]:p._events[B].push(D):(p._events[B]=D,p._eventsCount++),p}function Z(p,y){--p._eventsCount==0?p._events=new I:delete p._events[y]}function v(){this._events=new I,this._eventsCount=0}Object.create&&(I.prototype=Object.create(null),new I().__proto__||(S=!1)),v.prototype.eventNames=function(){var p,y,b=[];if(this._eventsCount===0)return b;for(y in p=this._events)h.call(p,y)&&b.push(S?y.slice(1):y);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(p)):b},v.prototype.listeners=function(p){var y=S?S+p:p,b=this._events[y];if(!b)return[];if(b.fn)return[b.fn];for(var R=0,F=b.length,D=new Array(F);R<F;R++)D[R]=b[R].fn;return D},v.prototype.listenerCount=function(p){var y=S?S+p:p,b=this._events[y];return b?b.fn?1:b.length:0},v.prototype.emit=function(p,y,b,R,F,D){var B=S?S+p:p;if(!this._events[B])return!1;var A,N,s=this._events[B],l=arguments.length;if(s.fn){switch(s.once&&this.removeListener(p,s.fn,void 0,!0),l){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,y),!0;case 3:return s.fn.call(s.context,y,b),!0;case 4:return s.fn.call(s.context,y,b,R),!0;case 5:return s.fn.call(s.context,y,b,R,F),!0;case 6:return s.fn.call(s.context,y,b,R,F,D),!0}for(N=1,A=new Array(l-1);N<l;N++)A[N-1]=arguments[N];s.fn.apply(s.context,A)}else{var m,x=s.length;for(N=0;N<x;N++)switch(s[N].once&&this.removeListener(p,s[N].fn,void 0,!0),l){case 1:s[N].fn.call(s[N].context);break;case 2:s[N].fn.call(s[N].context,y);break;case 3:s[N].fn.call(s[N].context,y,b);break;case 4:s[N].fn.call(s[N].context,y,b,R);break;default:if(!A)for(m=1,A=new Array(l-1);m<l;m++)A[m-1]=arguments[m];s[N].fn.apply(s[N].context,A)}}return!0},v.prototype.on=function(p,y,b){return L(this,p,y,b,!1)},v.prototype.once=function(p,y,b){return L(this,p,y,b,!0)},v.prototype.removeListener=function(p,y,b,R){var F=S?S+p:p;if(!this._events[F])return this;if(!y)return Z(this,F),this;var D=this._events[F];if(D.fn)D.fn!==y||R&&!D.once||b&&D.context!==b||Z(this,F);else{for(var B=0,A=[],N=D.length;B<N;B++)(D[B].fn!==y||R&&!D[B].once||b&&D[B].context!==b)&&A.push(D[B]);A.length?this._events[F]=A.length===1?A[0]:A:Z(this,F)}return this},v.prototype.removeAllListeners=function(p){var y;return p?(y=S?S+p:p,this._events[y]&&Z(this,y)):(this._events=new I,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=S,v.EventEmitter=v,H.exports=v},717:H=>{typeof Object.create=="function"?H.exports=function(h,S){h.super_=S,h.prototype=Object.create(S.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}})}:H.exports=function(h,S){h.super_=S;var I=function(){};I.prototype=S.prototype,h.prototype=new I,h.prototype.constructor=h}},824:H=>{var h=1e3,S=60*h,I=60*S,C=24*I,L=7*C,Z=365.25*C;function v(p,y,b,R){var F=y>=1.5*b;return Math.round(p/b)+" "+R+(F?"s":"")}H.exports=function(p,y){y=y||{};var b=typeof p;if(b==="string"&&p.length>0)return function(R){if(!((R=String(R)).length>100)){var F=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(R);if(F){var D=parseFloat(F[1]);switch((F[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return D*Z;case"weeks":case"week":case"w":return D*L;case"days":case"day":case"d":return D*C;case"hours":case"hour":case"hrs":case"hr":case"h":return D*I;case"minutes":case"minute":case"mins":case"min":case"m":return D*S;case"seconds":case"second":case"secs":case"sec":case"s":return D*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return D;default:return}}}}(p);if(b==="number"&&isFinite(p))return y.long?function(R){var F=Math.abs(R);return F>=C?v(R,F,C,"day"):F>=I?v(R,F,I,"hour"):F>=S?v(R,F,S,"minute"):F>=h?v(R,F,h,"second"):R+" ms"}(p):function(R){var F=Math.abs(R);return F>=C?Math.round(R/C)+"d":F>=I?Math.round(R/I)+"h":F>=S?Math.round(R/S)+"m":F>=h?Math.round(R/h)+"s":R+"ms"}(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))}},520:(H,h,S)=>{var I=S(155),C=I.platform==="win32",L=S(539);function Z(s,l){for(var m=[],x=0;x<s.length;x++){var q=s[x];q&&q!=="."&&(q===".."?m.length&&m[m.length-1]!==".."?m.pop():l&&m.push(".."):m.push(q))}return m}function v(s){for(var l=s.length-1,m=0;m<=l&&!s[m];m++);for(var x=l;x>=0&&!s[x];x--);return m===0&&x===l?s:m>x?[]:s.slice(m,x+1)}var p=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,y=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,b={};function R(s){var l=p.exec(s),m=(l[1]||"")+(l[2]||""),x=l[3]||"",q=y.exec(x);return[m,q[1],q[2],q[3]]}function F(s){var l=p.exec(s),m=l[1]||"",x=!!m&&m[1]!==":";return{device:m,isUnc:x,isAbsolute:x||!!l[2],tail:l[3]}}function D(s){return"\\\\"+s.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}b.resolve=function(){for(var s="",l="",m=!1,x=arguments.length-1;x>=-1;x--){var q;if(x>=0?q=arguments[x]:s?(q=I.env["="+s])&&q.substr(0,3).toLowerCase()===s.toLowerCase()+"\\"||(q=s+"\\"):q=I.cwd(),!L.isString(q))throw new TypeError("Arguments to path.resolve must be strings");if(q){var V=F(q),te=V.device,fe=V.isUnc,ge=V.isAbsolute,ve=V.tail;if((!te||!s||te.toLowerCase()===s.toLowerCase())&&(s||(s=te),m||(l=ve+"\\"+l,m=ge),s&&m))break}}return fe&&(s=D(s)),s+(m?"\\":"")+(l=Z(l.split(/[\\\/]+/),!m).join("\\"))||"."},b.normalize=function(s){var l=F(s),m=l.device,x=l.isUnc,q=l.isAbsolute,V=l.tail,te=/[\\\/]$/.test(V);return(V=Z(V.split(/[\\\/]+/),!q).join("\\"))||q||(V="."),V&&te&&(V+="\\"),x&&(m=D(m)),m+(q?"\\":"")+V},b.isAbsolute=function(s){return F(s).isAbsolute},b.join=function(){for(var s=[],l=0;l<arguments.length;l++){var m=arguments[l];if(!L.isString(m))throw new TypeError("Arguments to path.join must be strings");m&&s.push(m)}var x=s.join("\\");return/^[\\\/]{2}[^\\\/]/.test(s[0])||(x=x.replace(/^[\\\/]{2,}/,"\\")),b.normalize(x)},b.relative=function(s,l){s=b.resolve(s),l=b.resolve(l);for(var m=s.toLowerCase(),x=l.toLowerCase(),q=v(l.split("\\")),V=v(m.split("\\")),te=v(x.split("\\")),fe=Math.min(V.length,te.length),ge=fe,ve=0;ve<fe;ve++)if(V[ve]!==te[ve]){ge=ve;break}if(ge==0)return l;var se=[];for(ve=ge;ve<V.length;ve++)se.push("..");return(se=se.concat(q.slice(ge))).join("\\")},b._makeLong=function(s){if(!L.isString(s))return s;if(!s)return"";var l=b.resolve(s);return/^[a-zA-Z]\:\\/.test(l)?"\\\\?\\"+l:/^\\\\[^?.]/.test(l)?"\\\\?\\UNC\\"+l.substring(2):s},b.dirname=function(s){var l=R(s),m=l[0],x=l[1];return m||x?(x&&(x=x.substr(0,x.length-1)),m+x):"."},b.basename=function(s,l){var m=R(s)[2];return l&&m.substr(-1*l.length)===l&&(m=m.substr(0,m.length-l.length)),m},b.extname=function(s){return R(s)[3]},b.format=function(s){if(!L.isObject(s))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof s);var l=s.root||"";if(!L.isString(l))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof s.root);var m=s.dir,x=s.base||"";return m?m[m.length-1]===b.sep?m+x:m+b.sep+x:x},b.parse=function(s){if(!L.isString(s))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof s);var l=R(s);if(!l||l.length!==4)throw new TypeError("Invalid path '"+s+"'");return{root:l[0],dir:l[0]+l[1].slice(0,-1),base:l[2],ext:l[3],name:l[2].slice(0,l[2].length-l[3].length)}},b.sep="\\",b.delimiter=";";var B=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,A={};function N(s){return B.exec(s).slice(1)}A.resolve=function(){for(var s="",l=!1,m=arguments.length-1;m>=-1&&!l;m--){var x=m>=0?arguments[m]:I.cwd();if(!L.isString(x))throw new TypeError("Arguments to path.resolve must be strings");x&&(s=x+"/"+s,l=x[0]==="/")}return(l?"/":"")+(s=Z(s.split("/"),!l).join("/"))||"."},A.normalize=function(s){var l=A.isAbsolute(s),m=s&&s[s.length-1]==="/";return(s=Z(s.split("/"),!l).join("/"))||l||(s="."),s&&m&&(s+="/"),(l?"/":"")+s},A.isAbsolute=function(s){return s.charAt(0)==="/"},A.join=function(){for(var s="",l=0;l<arguments.length;l++){var m=arguments[l];if(!L.isString(m))throw new TypeError("Arguments to path.join must be strings");m&&(s+=s?"/"+m:m)}return A.normalize(s)},A.relative=function(s,l){s=A.resolve(s).substr(1),l=A.resolve(l).substr(1);for(var m=v(s.split("/")),x=v(l.split("/")),q=Math.min(m.length,x.length),V=q,te=0;te<q;te++)if(m[te]!==x[te]){V=te;break}var fe=[];for(te=V;te<m.length;te++)fe.push("..");return(fe=fe.concat(x.slice(V))).join("/")},A._makeLong=function(s){return s},A.dirname=function(s){var l=N(s),m=l[0],x=l[1];return m||x?(x&&(x=x.substr(0,x.length-1)),m+x):"."},A.basename=function(s,l){var m=N(s)[2];return l&&m.substr(-1*l.length)===l&&(m=m.substr(0,m.length-l.length)),m},A.extname=function(s){return N(s)[3]},A.format=function(s){if(!L.isObject(s))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof s);var l=s.root||"";if(!L.isString(l))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof s.root);return(s.dir?s.dir+A.sep:"")+(s.base||"")},A.parse=function(s){if(!L.isString(s))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof s);var l=N(s);if(!l||l.length!==4)throw new TypeError("Invalid path '"+s+"'");return l[1]=l[1]||"",l[2]=l[2]||"",l[3]=l[3]||"",{root:l[0],dir:l[0]+l[1].slice(0,-1),base:l[2],ext:l[3],name:l[2].slice(0,l[2].length-l[3].length)}},A.sep="/",A.delimiter=":",H.exports=C?b:A,H.exports.posix=A,H.exports.win32=b},155:H=>{var h,S,I=H.exports={};function C(){throw new Error("setTimeout has not been defined")}function L(){throw new Error("clearTimeout has not been defined")}function Z(A){if(h===setTimeout)return setTimeout(A,0);if((h===C||!h)&&setTimeout)return h=setTimeout,setTimeout(A,0);try{return h(A,0)}catch{try{return h.call(null,A,0)}catch{return h.call(this,A,0)}}}(function(){try{h=typeof setTimeout=="function"?setTimeout:C}catch{h=C}try{S=typeof clearTimeout=="function"?clearTimeout:L}catch{S=L}})();var v,p=[],y=!1,b=-1;function R(){y&&v&&(y=!1,v.length?p=v.concat(p):b=-1,p.length&&F())}function F(){if(!y){var A=Z(R);y=!0;for(var N=p.length;N;){for(v=p,p=[];++b<N;)v&&v[b].run();b=-1,N=p.length}v=null,y=!1,function(s){if(S===clearTimeout)return clearTimeout(s);if((S===L||!S)&&clearTimeout)return S=clearTimeout,clearTimeout(s);try{S(s)}catch{try{return S.call(null,s)}catch{return S.call(this,s)}}}(A)}}function D(A,N){this.fun=A,this.array=N}function B(){}I.nextTick=function(A){var N=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)N[s-1]=arguments[s];p.push(new D(A,N)),p.length!==1||y||Z(F)},D.prototype.run=function(){this.fun.apply(null,this.array)},I.title="browser",I.browser=!0,I.env={},I.argv=[],I.version="",I.versions={},I.on=B,I.addListener=B,I.once=B,I.off=B,I.removeListener=B,I.removeAllListeners=B,I.emit=B,I.prependListener=B,I.prependOnceListener=B,I.listeners=function(A){return[]},I.binding=function(A){throw new Error("process.binding is not supported")},I.cwd=function(){return"/"},I.chdir=function(A){throw new Error("process.chdir is not supported")},I.umask=function(){return 0}},384:H=>{H.exports=function(h){return h&&typeof h=="object"&&typeof h.copy=="function"&&typeof h.fill=="function"&&typeof h.readUInt8=="function"}},539:(H,h,S)=>{var I=S(155),C=/%[sdj%]/g;h.format=function(f){if(!s(f)){for(var g=[],M=0;M<arguments.length;M++)g.push(v(arguments[M]));return g.join(" ")}M=1;for(var K=arguments,_e=K.length,P=String(f).replace(C,function(oe){if(oe==="%%")return"%";if(M>=_e)return oe;switch(oe){case"%s":return String(K[M++]);case"%d":return Number(K[M++]);case"%j":try{return JSON.stringify(K[M++])}catch{return"[Circular]"}default:return oe}}),W=K[M];M<_e;W=K[++M])A(W)||!x(W)?P+=" "+W:P+=" "+v(W);return P},h.deprecate=function(f,g){if(l(S.g.process))return function(){return h.deprecate(f,g).apply(this,arguments)};if(I.noDeprecation===!0)return f;var M=!1;return function(){if(!M){if(I.throwDeprecation)throw new Error(g);I.traceDeprecation?console.trace(g):console.error(g),M=!0}return f.apply(this,arguments)}};var L,Z={};function v(f,g){var M={seen:[],stylize:y};return arguments.length>=3&&(M.depth=arguments[2]),arguments.length>=4&&(M.colors=arguments[3]),B(g)?M.showHidden=g:g&&h._extend(M,g),l(M.showHidden)&&(M.showHidden=!1),l(M.depth)&&(M.depth=2),l(M.colors)&&(M.colors=!1),l(M.customInspect)&&(M.customInspect=!0),M.colors&&(M.stylize=p),b(M,f,M.depth)}function p(f,g){var M=v.styles[g];return M?"\x1B["+v.colors[M][0]+"m"+f+"\x1B["+v.colors[M][1]+"m":f}function y(f,g){return f}function b(f,g,M){if(f.customInspect&&g&&te(g.inspect)&&g.inspect!==h.inspect&&(!g.constructor||g.constructor.prototype!==g)){var K=g.inspect(M,f);return s(K)||(K=b(f,K,M)),K}var _e=function(ae,ie){if(l(ie))return ae.stylize("undefined","undefined");if(s(ie)){var xe="'"+JSON.stringify(ie).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return ae.stylize(xe,"string")}if(N(ie))return ae.stylize(""+ie,"number");if(B(ie))return ae.stylize(""+ie,"boolean");if(A(ie))return ae.stylize("null","null")}(f,g);if(_e)return _e;var P=Object.keys(g),W=function(ae){var ie={};return ae.forEach(function(xe,Ce){ie[xe]=!0}),ie}(P);if(f.showHidden&&(P=Object.getOwnPropertyNames(g)),V(g)&&(P.indexOf("message")>=0||P.indexOf("description")>=0))return R(g);if(P.length===0){if(te(g)){var oe=g.name?": "+g.name:"";return f.stylize("[Function"+oe+"]","special")}if(m(g))return f.stylize(RegExp.prototype.toString.call(g),"regexp");if(q(g))return f.stylize(Date.prototype.toString.call(g),"date");if(V(g))return R(g)}var Oe,we="",Ue=!1,Ve=["{","}"];return D(g)&&(Ue=!0,Ve=["[","]"]),te(g)&&(we=" [Function"+(g.name?": "+g.name:"")+"]"),m(g)&&(we=" "+RegExp.prototype.toString.call(g)),q(g)&&(we=" "+Date.prototype.toUTCString.call(g)),V(g)&&(we=" "+R(g)),P.length!==0||Ue&&g.length!=0?M<0?m(g)?f.stylize(RegExp.prototype.toString.call(g),"regexp"):f.stylize("[Object]","special"):(f.seen.push(g),Oe=Ue?function(ae,ie,xe,Ce,je){for(var Ee=[],Me=0,Lt=ie.length;Me<Lt;++Me)ke(ie,String(Me))?Ee.push(F(ae,ie,xe,Ce,String(Me),!0)):Ee.push("");return je.forEach(function(yt){yt.match(/^\d+$/)||Ee.push(F(ae,ie,xe,Ce,yt,!0))}),Ee}(f,g,M,W,P):P.map(function(ae){return F(f,g,M,W,ae,Ue)}),f.seen.pop(),function(ae,ie,xe){return ae.reduce(function(Ce,je){return je.indexOf(`
`)>=0,Ce+je.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?xe[0]+(ie===""?"":ie+`
 `)+" "+ae.join(`,
  `)+" "+xe[1]:xe[0]+ie+" "+ae.join(", ")+" "+xe[1]}(Oe,we,Ve)):Ve[0]+we+Ve[1]}function R(f){return"["+Error.prototype.toString.call(f)+"]"}function F(f,g,M,K,_e,P){var W,oe,Oe;if((Oe=Object.getOwnPropertyDescriptor(g,_e)||{value:g[_e]}).get?oe=Oe.set?f.stylize("[Getter/Setter]","special"):f.stylize("[Getter]","special"):Oe.set&&(oe=f.stylize("[Setter]","special")),ke(K,_e)||(W="["+_e+"]"),oe||(f.seen.indexOf(Oe.value)<0?(oe=A(M)?b(f,Oe.value,null):b(f,Oe.value,M-1)).indexOf(`
`)>-1&&(oe=P?oe.split(`
`).map(function(we){return"  "+we}).join(`
`).substr(2):`
`+oe.split(`
`).map(function(we){return"   "+we}).join(`
`)):oe=f.stylize("[Circular]","special")),l(W)){if(P&&_e.match(/^\d+$/))return oe;(W=JSON.stringify(""+_e)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(W=W.substr(1,W.length-2),W=f.stylize(W,"name")):(W=W.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),W=f.stylize(W,"string"))}return W+": "+oe}function D(f){return Array.isArray(f)}function B(f){return typeof f=="boolean"}function A(f){return f===null}function N(f){return typeof f=="number"}function s(f){return typeof f=="string"}function l(f){return f===void 0}function m(f){return x(f)&&fe(f)==="[object RegExp]"}function x(f){return typeof f=="object"&&f!==null}function q(f){return x(f)&&fe(f)==="[object Date]"}function V(f){return x(f)&&(fe(f)==="[object Error]"||f instanceof Error)}function te(f){return typeof f=="function"}function fe(f){return Object.prototype.toString.call(f)}function ge(f){return f<10?"0"+f.toString(10):f.toString(10)}h.debuglog=function(f){if(l(L)&&(L=I.env.NODE_DEBUG||""),f=f.toUpperCase(),!Z[f])if(new RegExp("\\b"+f+"\\b","i").test(L)){var g=I.pid;Z[f]=function(){var M=h.format.apply(h,arguments);console.error("%s %d: %s",f,g,M)}}else Z[f]=function(){};return Z[f]},h.inspect=v,v.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},v.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},h.isArray=D,h.isBoolean=B,h.isNull=A,h.isNullOrUndefined=function(f){return f==null},h.isNumber=N,h.isString=s,h.isSymbol=function(f){return typeof f=="symbol"},h.isUndefined=l,h.isRegExp=m,h.isObject=x,h.isDate=q,h.isError=V,h.isFunction=te,h.isPrimitive=function(f){return f===null||typeof f=="boolean"||typeof f=="number"||typeof f=="string"||typeof f=="symbol"||f===void 0},h.isBuffer=S(384);var ve=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function se(){var f=new Date,g=[ge(f.getHours()),ge(f.getMinutes()),ge(f.getSeconds())].join(":");return[f.getDate(),ve[f.getMonth()],g].join(" ")}function ke(f,g){return Object.prototype.hasOwnProperty.call(f,g)}h.log=function(){console.log("%s - %s",se(),h.format.apply(h,arguments))},h.inherits=S(717),h._extend=function(f,g){if(!g||!x(g))return f;for(var M=Object.keys(g),K=M.length;K--;)f[M[K]]=g[M[K]];return f}}},Xt={};function me(H){var h=Xt[H];if(h!==void 0)return h.exports;var S=Xt[H]={exports:{}};return rr[H].call(S.exports,S,S.exports,me),S.exports}me.n=H=>{var h=H&&H.__esModule?()=>H.default:()=>H;return me.d(h,{a:h}),h},me.d=(H,h)=>{for(var S in h)me.o(h,S)&&!me.o(H,S)&&Object.defineProperty(H,S,{enumerable:!0,get:h[S]})},me.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),me.o=(H,h)=>Object.prototype.hasOwnProperty.call(H,h),me.r=H=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(H,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(H,"__esModule",{value:!0})};var kn={};return(()=>{me.r(kn),me.d(kn,{LSPluginUser:()=>nr,setupPluginUserInstance:()=>Nr});var H=me(520);me(856);const h=function(){this.__data__=[],this.size=0},S=function(t,e){return t===e||t!=t&&e!=e},I=function(t,e){for(var n=t.length;n--;)if(S(t[n][0],e))return n;return-1};var C=Array.prototype.splice;const L=function(t){var e=this.__data__,n=I(e,t);return!(n<0)&&(n==e.length-1?e.pop():C.call(e,n,1),--this.size,!0)},Z=function(t){var e=this.__data__,n=I(e,t);return n<0?void 0:e[n][1]},v=function(t){return I(this.__data__,t)>-1},p=function(t,e){var n=this.__data__,r=I(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function y(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}y.prototype.clear=h,y.prototype.delete=L,y.prototype.get=Z,y.prototype.has=v,y.prototype.set=p;const b=y,R=function(){this.__data__=new b,this.size=0},F=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},D=function(t){return this.__data__.get(t)},B=function(t){return this.__data__.has(t)},A=typeof jn=="object"&&jn&&jn.Object===Object&&jn;var N=typeof self=="object"&&self&&self.Object===Object&&self;const s=A||N||Function("return this")(),l=s.Symbol;var m=Object.prototype,x=m.hasOwnProperty,q=m.toString,V=l?l.toStringTag:void 0;const te=function(t){var e=x.call(t,V),n=t[V];try{t[V]=void 0;var r=!0}catch{}var i=q.call(t);return r&&(e?t[V]=n:delete t[V]),i};var fe=Object.prototype.toString;const ge=function(t){return fe.call(t)};var ve=l?l.toStringTag:void 0;const se=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":ve&&ve in Object(t)?te(t):ge(t)},ke=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},f=function(t){if(!ke(t))return!1;var e=se(t);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},g=s["__core-js_shared__"];var M,K=(M=/[^.]+$/.exec(g&&g.keys&&g.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"";const _e=function(t){return!!K&&K in t};var P=Function.prototype.toString;const W=function(t){if(t!=null){try{return P.call(t)}catch{}try{return t+""}catch{}}return""};var oe=/^\[object .+?Constructor\]$/,Oe=Function.prototype,we=Object.prototype,Ue=Oe.toString,Ve=we.hasOwnProperty,ae=RegExp("^"+Ue.call(Ve).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const ie=function(t){return!(!ke(t)||_e(t))&&(f(t)?ae:oe).test(W(t))},xe=function(t,e){return t?.[e]},Ce=function(t,e){var n=xe(t,e);return ie(n)?n:void 0},je=Ce(s,"Map"),Ee=Ce(Object,"create"),Me=function(){this.__data__=Ee?Ee(null):{},this.size=0},Lt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var yt=Object.prototype.hasOwnProperty;const En=function(t){var e=this.__data__;if(Ee){var n=e[t];return n==="__lodash_hash_undefined__"?void 0:n}return yt.call(e,t)?e[t]:void 0};var Tn=Object.prototype.hasOwnProperty;const In=function(t){var e=this.__data__;return Ee?e[t]!==void 0:Tn.call(e,t)},Fn=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ee&&e===void 0?"__lodash_hash_undefined__":e,this};function Ke(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ke.prototype.clear=Me,Ke.prototype.delete=Lt,Ke.prototype.get=En,Ke.prototype.has=In,Ke.prototype.set=Fn;const en=Ke,Ln=function(){this.size=0,this.__data__={hash:new en,map:new(je||b),string:new en}},Nn=function(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null},st=function(t,e){var n=t.__data__;return Nn(e)?n[typeof e=="string"?"string":"hash"]:n.map},w=function(t){var e=st(this,t).delete(t);return this.size-=e?1:0,e},j=function(t){return st(this,t).get(t)},U=function(t){return st(this,t).has(t)},J=function(t,e){var n=st(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function ne(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ne.prototype.clear=Ln,ne.prototype.delete=w,ne.prototype.get=j,ne.prototype.has=U,ne.prototype.set=J;const Ie=ne,We=function(t,e){var n=this.__data__;if(n instanceof b){var r=n.__data__;if(!je||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ie(r)}return n.set(t,e),this.size=n.size,this};function Fe(t){var e=this.__data__=new b(t);this.size=e.size}Fe.prototype.clear=R,Fe.prototype.delete=F,Fe.prototype.get=D,Fe.prototype.has=B,Fe.prototype.set=We;const Ge=Fe,at=function(){try{var t=Ce(Object,"defineProperty");return t({},"",{}),t}catch{}}(),bt=function(t,e,n){e=="__proto__"&&at?at(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Nt=function(t,e,n){(n!==void 0&&!S(t[e],n)||n===void 0&&!(e in t))&&bt(t,e,n)},tn=function(t){return function(e,n,r){for(var i=-1,a=Object(e),c=r(e),u=c.length;u--;){var d=c[++i];if(n(a[d],d,a)===!1)break}return e}}();var nn=qe&&!qe.nodeType&&qe,ct=nn&&!0&&be&&!be.nodeType&&be,rn=ct&&ct.exports===nn?s.Buffer:void 0;rn&&rn.allocUnsafe;const Mn=function(t,e){return t.slice()},_t=s.Uint8Array,Mt=function(t){var e=new t.constructor(t.byteLength);return new _t(e).set(new _t(t)),e},Pt=function(t,e){var n=Mt(t.buffer);return new t.constructor(n,t.byteOffset,t.length)},$e=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var Rt=Object.create;const wt=function(){function t(){}return function(e){if(!ke(e))return{};if(Rt)return Rt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),xt=function(t,e){return function(n){return t(e(n))}},on=xt(Object.getPrototypeOf,Object);var Pn=Object.prototype;const Dt=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||Pn)},Rn=function(t){return typeof t.constructor!="function"||Dt(t)?{}:wt(on(t))},Pe=function(t){return t!=null&&typeof t=="object"},Te=function(t){return Pe(t)&&se(t)=="[object Arguments]"};var Ye=Object.prototype,Je=Ye.hasOwnProperty,Ut=Ye.propertyIsEnumerable;const Qe=Te(function(){return arguments}())?Te:function(t){return Pe(t)&&Je.call(t,"callee")&&!Ut.call(t,"callee")},Ae=Array.isArray,$t=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},Ct=function(t){return t!=null&&$t(t.length)&&!f(t)},sn=function(t){return Pe(t)&&Ct(t)},zt=function(){return!1};var ue=qe&&!qe.nodeType&&qe,Ht=ue&&!0&&be&&!be.nodeType&&be,pe=Ht&&Ht.exports===ue?s.Buffer:void 0;const lt=(pe?pe.isBuffer:void 0)||zt;var ce=Function.prototype,ut=Object.prototype,Ot=ce.toString,an=ut.hasOwnProperty,Bt=Ot.call(Object);const cn=function(t){if(!Pe(t)||se(t)!="[object Object]")return!1;var e=on(t);if(e===null)return!0;var n=an.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Ot.call(n)==Bt};var Y={};Y["[object Float32Array]"]=Y["[object Float64Array]"]=Y["[object Int8Array]"]=Y["[object Int16Array]"]=Y["[object Int32Array]"]=Y["[object Uint8Array]"]=Y["[object Uint8ClampedArray]"]=Y["[object Uint16Array]"]=Y["[object Uint32Array]"]=!0,Y["[object Arguments]"]=Y["[object Array]"]=Y["[object ArrayBuffer]"]=Y["[object Boolean]"]=Y["[object DataView]"]=Y["[object Date]"]=Y["[object Error]"]=Y["[object Function]"]=Y["[object Map]"]=Y["[object Number]"]=Y["[object Object]"]=Y["[object RegExp]"]=Y["[object Set]"]=Y["[object String]"]=Y["[object WeakMap]"]=!1;const Ze=function(t){return Pe(t)&&$t(t.length)&&!!Y[se(t)]},qt=function(t){return function(e){return t(e)}};var St=qe&&!qe.nodeType&&qe,Le=St&&!0&&be&&!be.nodeType&&be,Xe=Le&&Le.exports===St&&A.process,ft=function(){try{var t=Le&&Le.require&&Le.require("util").types;return t||Xe&&Xe.binding&&Xe.binding("util")}catch{}}(),Wt=ft&&ft.isTypedArray;const pt=Wt?qt(Wt):Ze,et=function(t,e){if((e!=="constructor"||typeof t[e]!="function")&&e!="__proto__")return t[e]};var tt=Object.prototype.hasOwnProperty;const nt=function(t,e,n){var r=t[e];tt.call(t,e)&&S(r,n)&&(n!==void 0||e in t)||bt(t,e,n)},ln=function(t,e,n,r){var i=!n;n||(n={});for(var a=-1,c=e.length;++a<c;){var u=e[a],d=void 0;d===void 0&&(d=t[u]),i?bt(n,u,d):nt(n,u,d)}return n},un=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var fn=/^(?:0|[1-9]\d*)$/;const ht=function(t,e){var n=typeof t;return!!(e=e??9007199254740991)&&(n=="number"||n!="symbol"&&fn.test(t))&&t>-1&&t%1==0&&t<e};var pn=Object.prototype.hasOwnProperty;const jt=function(t,e){var n=Ae(t),r=!n&&Qe(t),i=!n&&!r&&lt(t),a=!n&&!r&&!i&&pt(t),c=n||r||i||a,u=c?un(t.length,String):[],d=u.length;for(var E in t)!e&&!pn.call(t,E)||c&&(E=="length"||i&&(E=="offset"||E=="parent")||a&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||ht(E,d))||u.push(E);return u},Gt=function(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e};var ze=Object.prototype.hasOwnProperty;const At=function(t){if(!ke(t))return Gt(t);var e=Dt(t),n=[];for(var r in t)(r!="constructor"||!e&&ze.call(t,r))&&n.push(r);return n},Jt=function(t){return Ct(t)?jt(t,!0):At(t)},Dn=function(t){return ln(t,Jt(t))},Un=function(t,e,n,r,i,a,c){var u=et(t,n),d=et(e,n),E=c.get(d);if(E)Nt(t,n,E);else{var k=void 0,T=k===void 0;if(T){var $=Ae(d),G=!$&&lt(d),z=!$&&!G&&pt(d);k=d,$||G||z?Ae(u)?k=u:sn(u)?k=$e(u):G?(T=!1,k=Mn(d)):z?(T=!1,k=Pt(d)):k=[]:cn(d)||Qe(d)?(k=u,Qe(u)?k=Dn(u):ke(u)&&!f(u)||(k=Rn(d))):T=!1}T&&(c.set(d,k),i(k,d,r,a,c),c.delete(d)),Nt(t,n,k)}},rt=function t(e,n,r,i,a){e!==n&&tn(n,function(c,u){if(a||(a=new Ge),ke(c))Un(e,n,u,r,t,i,a);else{var d=void 0;d===void 0&&(d=c),Nt(e,u,d)}},Jt)},Zt=function(t){return t},hn=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var kt=Math.max;const dn=function(t,e,n){return e=kt(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=kt(r.length-e,0),c=Array(a);++i<a;)c[i]=r[e+i];i=-1;for(var u=Array(e+1);++i<e;)u[i]=r[i];return u[e]=n(c),hn(t,this,u)}},mn=function(t){return function(){return t}},$n=at?function(t,e){return at(t,"toString",{configurable:!0,enumerable:!1,value:mn(e),writable:!0})}:Zt;var Et=Date.now;const Vt=function(t){var e=0,n=0;return function(){var r=Et(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}($n),zn=function(t,e){return Vt(dn(t,e,Zt),t+"")},Re=function(t,e,n){if(!ke(n))return!1;var r=typeof e;return!!(r=="number"?Ct(n)&&ht(e,n.length):r=="string"&&e in n)&&S(n[e],t)},gn=function(t){return zn(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,c=i>2?n[2]:void 0;for(a=t.length>3&&typeof a=="function"?(i--,a):void 0,c&&Re(n[0],n[1],c)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var u=n[r];u&&t(e,u,r,a)}return e})}(function(t,e,n){rt(t,e,n)});var dt=function(){return dt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},dt.apply(this,arguments)};function vn(t){return t.toLowerCase()}var Hn=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],mt=/[^A-Z0-9]+/gi;function Ne(t,e,n){return e instanceof RegExp?t.replace(e,n):e.reduce(function(r,i){return r.replace(i,n)},t)}function yn(t,e){return e===void 0&&(e={}),function(n,r){r===void 0&&(r={});for(var i=r.splitRegexp,a=i===void 0?Hn:i,c=r.stripRegexp,u=c===void 0?mt:c,d=r.transform,E=d===void 0?vn:d,k=r.delimiter,T=k===void 0?" ":k,$=Ne(Ne(n,a,"$1\0$2"),u,"\0"),G=0,z=$.length;$.charAt(G)==="\0";)G++;for(;$.charAt(z-1)==="\0";)z--;return $.slice(G,z).split("\0").map(E).join(T)}(t,dt({delimiter:"."},e))}var Kt=me(729),gt=me.n(Kt);function Tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const bn=navigator.platform.toLowerCase()==="win32"?H.win32:H.posix,o=function(t,e){return e===void 0&&(e={}),yn(t,dt({delimiter:"_"},e))},O=gn;class _ extends gt(){constructor(e,n){super(),Tt(this,"_tag",void 0),Tt(this,"_opts",void 0),Tt(this,"_logs",[]),this._tag=e,this._opts=n}write(e,n,r){var i;n!=null&&n.length&&n[n.length-1]===!0&&(r=!0,n.pop());const a=n.reduce((u,d)=>(d&&d instanceof Error?u+=`${d.message} ${d.stack}`:u+=d.toString(),u),`[${this._tag}][${new Date().toLocaleTimeString()}] `);var c;this._logs.push([e,a]),(r||(i=this._opts)!==null&&i!==void 0&&i.console)&&((c=console)===null||c===void 0||c[e==="ERROR"?"error":"debug"](`${e}: ${a}`)),this.emit("change")}clear(){this._logs=[],this.emit("change")}info(...e){this.write("INFO",e)}error(...e){this.write("ERROR",e)}warn(...e){this.write("WARN",e)}setTag(e){this._tag=e}toJSON(){return this._logs}}function X(t,...e){try{const n=new URL(t);if(!n.origin)throw new Error(null);const r=bn.join(t.substr(n.origin.length),...e);return n.origin+r}catch{return bn.join(t,...e)}}function re(t,e){let n,r,i=!1;const a=u=>d=>{t&&clearTimeout(t),u(d),i=!0},c=new Promise((u,d)=>{n=a(u),r=a(d),t&&(t=setTimeout(()=>r(new Error(`[deferred timeout] ${e}`)),t))});return{created:Date.now(),setTag:u=>e=u,resolve:n,reject:r,promise:c,get settled(){return i}}}const ye=new Map;window.__injectedUIEffects=ye;var he=me(227),ot=me.n(he);function Q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const de="application/x-postmate-v1+json";let Bn=0;const or={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},qn=(t,e)=>(typeof e!="string"||t.origin===e)&&!!t.data&&(typeof t.data!="object"||"postmate"in t.data)&&t.data.type===de&&!!or[t.data.postmate];class Mr{constructor(e){Q(this,"parent",void 0),Q(this,"frame",void 0),Q(this,"child",void 0),Q(this,"events",{}),Q(this,"childOrigin",void 0),Q(this,"listener",void 0),this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=n=>{if(!qn(n,this.childOrigin))return!1;const{data:r,name:i}=((n||{}).data||{}).value||{};n.data.postmate==="emit"&&i in this.events&&this.events[i].forEach(a=>{a.call(this,r)})},this.parent.addEventListener("message",this.listener,!1)}get(e,...n){return new Promise(r=>{const i=++Bn,a=c=>{c.data.uid===i&&c.data.postmate==="reply"&&(this.parent.removeEventListener("message",a,!1),r(c.data.value))};this.parent.addEventListener("message",a,!1),this.child.postMessage({postmate:"request",type:de,property:e,args:n,uid:i},this.childOrigin)})}call(e,n){this.child.postMessage({postmate:"call",type:de,property:e,data:n},this.childOrigin)}on(e,n){this.events[e]||(this.events[e]=[]),this.events[e].push(n)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class Pr{constructor(e){Q(this,"model",void 0),Q(this,"parent",void 0),Q(this,"parentOrigin",void 0),Q(this,"child",void 0),this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",n=>{if(!qn(n,this.parentOrigin))return;const{property:r,uid:i,data:a,args:c}=n.data;n.data.postmate!=="call"?((u,d,E)=>{const k=typeof u[d]=="function"?u[d].apply(null,E):u[d];return Promise.resolve(k)})(this.model,r,c).then(u=>{n.source.postMessage({property:r,postmate:"reply",type:de,uid:i,value:u},n.origin)}):r in this.model&&typeof this.model[r]=="function"&&this.model[r](a)})}emit(e,n){this.parent.postMessage({postmate:"emit",type:de,value:{name:e,data:n}},this.parentOrigin)}}class Wn{constructor(e){Q(this,"container",void 0),Q(this,"parent",void 0),Q(this,"frame",void 0),Q(this,"child",void 0),Q(this,"childOrigin",void 0),Q(this,"url",void 0),Q(this,"model",void 0),this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){const n=(a=>{const c=document.createElement("a");c.href=a;const u=c.protocol.length>4?c.protocol:window.location.protocol,d=c.host.length?c.port==="80"||c.port==="443"?c.hostname:c.host:window.location.host;return c.origin||`${u}//${d}`})(e=e||this.url);let r,i=0;return new Promise((a,c)=>{const u=E=>!!qn(E,n)&&(E.data.postmate==="handshake-reply"?(clearInterval(r),this.parent.removeEventListener("message",u,!1),this.childOrigin=E.origin,a(new Mr(this))):c("Failed handshake"));this.parent.addEventListener("message",u,!1);const d=()=>{i++,this.child.postMessage({postmate:"handshake",type:de,model:this.model},n),i===5&&clearInterval(r)};this.frame.addEventListener("load",()=>{d(),r=setInterval(d,500)}),this.frame.src=e})}destroy(){this.frame.parentNode.removeChild(this.frame)}}Q(Wn,"debug",!1),Q(Wn,"Model",void 0);class Rr{constructor(e){Q(this,"child",void 0),Q(this,"model",void 0),Q(this,"parent",void 0),Q(this,"parentOrigin",void 0),this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((e,n)=>{const r=i=>{if(i.data.postmate){if(i.data.postmate==="handshake"){this.child.removeEventListener("message",r,!1),i.source.postMessage({postmate:"handshake-reply",type:de},i.origin),this.parentOrigin=i.origin;const a=i.data.model;return a&&Object.keys(a).forEach(c=>{this.model[c]=a[c]}),e(new Pr(this))}return n("Handshake Reply Failed")}};this.child.addEventListener("message",r,!1)})}}function Yt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const{importHTML:Dr,createSandboxContainer:Ur}=window.QSandbox||{};function $r(t,e){return t.startsWith("http")?fetch(t,e):(t=t.replace("file://",""),new Promise(async(n,r)=>{try{const i=await window.apis.doAction(["readFile",t]);n({text:()=>i})}catch(i){console.error(i),r(i)}}))}class zr extends gt(){constructor(e){super(),Yt(this,"_pluginLocal",void 0),Yt(this,"_frame",void 0),Yt(this,"_root",void 0),Yt(this,"_loaded",!1),Yt(this,"_unmountFns",[]),this._pluginLocal=e,e._dispose(()=>{this._unmount()})}async load(){const{name:e,entry:n}=this._pluginLocal.options;if(this.loaded||!n)return;const{template:r,execScripts:i}=await Dr(n,{fetch:$r});this._mount(r,document.body);const a=Ur(e,{elementGetter:()=>{var u;return(u=this._root)===null||u===void 0?void 0:u.firstChild}}).instance.proxy;a.__shadow_mode__=!0,a.LSPluginLocal=this._pluginLocal,a.LSPluginShadow=this,a.LSPluginUser=a.logseq=new nr(this._pluginLocal.toJSON(),this._pluginLocal.caller);const c=await i(a,!0);this._unmountFns.push(c.unmount),this._loaded=!0}_mount(e,n){const r=this._frame=document.createElement("div");r.classList.add("lsp-shadow-sandbox"),r.id=this._pluginLocal.id,this._root=r.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,n.appendChild(r),this.emit("mounted")}_unmount(){for(const e of this._unmountFns)e&&e.call(null)}destroy(){var e,n;(e=this.frame)===null||e===void 0||(n=e.parentNode)===null||n===void 0||n.removeChild(this.frame)}get loaded(){return this._loaded}get document(){var e;return(e=this._root)===null||e===void 0?void 0:e.firstChild}get frame(){return this._frame}}function He(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const it=ot()("LSPlugin:caller"),Qt="#await#response#",Hr="#lspmsg#",ir="#lspmsg#error#",_n=t=>`#lspmsg#${t}`;class Br extends gt(){constructor(e){super(),He(this,"_pluginLocal",void 0),He(this,"_connected",!1),He(this,"_parent",void 0),He(this,"_child",void 0),He(this,"_shadow",void 0),He(this,"_status",void 0),He(this,"_userModel",{}),He(this,"_call",void 0),He(this,"_callUserModel",void 0),He(this,"_debugTag",""),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){if(this._connected)return;const n=this,r=this._pluginLocal!=null;let i=0;const a=new Map,c=re(6e4),u=this._extendUserModel({"#lspmsg#ready#":async k=>{u[_n(k?.pid)]=({type:T,payload:$})=>{it(`[host (_call) -> *user] ${this._debugTag}`,T,$),n.emit(T,$)},await c.resolve()},"#lspmsg#beforeunload#":async k=>{const T=re(1e4);n.emit("beforeunload",Object.assign({actor:T},k)),await T.promise},"#lspmsg#settings#":async({type:k,payload:T})=>{n.emit("settings:changed",T)},[Hr]:async({ns:k,type:T,payload:$})=>{it(`[host (async) -> *user] ${this._debugTag} ns=${k} type=${T}`,$),k&&k.startsWith("hook")?n.emit(`${k}:${T}`,$):n.emit(T,$)},"#lspmsg#reply#":({_sync:k,result:T})=>{if(it(`[sync host -> *user] #${k}`,T),a.has(k)){const $=a.get(k);$&&(T!=null&&T.hasOwnProperty(ir)?$.reject(T[ir]):$.resolve(T),a.delete(k))}},...e});var d;if(r)return await c.promise,JSON.parse(JSON.stringify((d=this._pluginLocal)===null||d===void 0?void 0:d.toJSON()));const E=new Rr(u).sendHandshakeReply();return this._status="pending",await E.then(k=>{this._child=k,this._connected=!0,this._call=async(T,$={},G)=>{if(G){const z=++i;a.set(z,G),$._sync=z,G.setTag(`async call #${z}`),it(`async call #${z}`)}return k.emit(_n(u.baseInfo.id),{type:T,payload:$}),G?.promise},this._callUserModel=async(T,$)=>{try{u[T]($)}catch{it(`[model method] #${T} not existed`)}},setInterval(()=>{if(a.size>100)for(const[T,$]of a)$.settled&&a.delete(T)},18e5)}).finally(()=>{this._status=void 0}),await c.promise,u.baseInfo}async call(e,n={}){var r;return(r=this._call)===null||r===void 0?void 0:r.call(this,e,n)}async callAsync(e,n={}){var r;const i=re(1e4);return(r=this._call)===null||r===void 0?void 0:r.call(this,e,n,i)}async callUserModel(e,...n){var r;return(r=this._callUserModel)===null||r===void 0?void 0:r.apply(this,[e,...n])}async callUserModelAsync(e,...n){var r;return e=`${Qt}${e}`,(r=this._callUserModel)===null||r===void 0?void 0:r.apply(this,[e,...n])}async _setupIframeSandbox(){const e=this._pluginLocal,n=e.id,r=`${n}_lsp_main`,i=new URL(e.options.entry);i.searchParams.set("__v__",e.options.version);const a=document.querySelector(`#${r}`);a&&a.parentElement.removeChild(a);const c=document.createElement("div");c.classList.add("lsp-iframe-sandbox-container"),c.id=r,c.dataset.pid=n;try{var u;const T=(u=await this._pluginLocal._loadLayoutsData())===null||u===void 0?void 0:u.$$0;if(T){c.dataset.inited_layout="true";let{width:$,height:G,left:z,top:ee,vw:le,vh:Se}=T;z=Math.max(z,0),z=typeof le=="number"?`${Math.min(100*z/le,99)}%`:`${z}px`,ee=Math.max(ee,45),ee=typeof Se=="number"?`${Math.min(100*ee/Se,99)}%`:`${ee}px`,Object.assign(c.style,{width:$+"px",height:G+"px",left:z,top:ee})}}catch(T){console.error("[Restore Layout Error]",T)}document.body.appendChild(c);const d=new Wn({id:n+"_iframe",container:c,url:i.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}});let E,k=d.sendHandshake();return this._status="pending",new Promise((T,$)=>{E=setTimeout(()=>{$(new Error("handshake Timeout")),d.destroy()},4e3),k.then(G=>{this._parent=G,this._connected=!0,this.emit("connected"),G.on(_n(e.id),({type:z,payload:ee})=>{var le,Se;it("[user -> *host] ",z,ee),(le=this._pluginLocal)===null||le===void 0||le.emit(z,ee||{}),(Se=this._pluginLocal)===null||Se===void 0||Se.caller.emit(z,ee||{})}),this._call=async(...z)=>{await G.call(_n(e.id),{type:z[0],payload:Object.assign(z[1]||{},{$$pid:e.id})})},this._callUserModel=async(z,...ee)=>{if(z.startsWith(Qt))return await G.get(z.replace(Qt,""),...ee);G.call(z,ee?.[0])},T(null)}).catch(G=>{$(G)}).finally(()=>{clearTimeout(E)})}).catch(T=>{throw it("[iframe sandbox] error",T),T}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const e=this._pluginLocal,n=this._shadow=new zr(e);try{this._status="pending",await n.load(),this._connected=!0,this.emit("connected"),this._call=async(r,i={},a)=>{var c;return a&&(i.actor=a),(c=this._pluginLocal)===null||c===void 0||c.emit(r,Object.assign(i,{$$pid:e.id})),a?.promise},this._callUserModel=async(...r)=>{var i;let a=r[0];(i=a)!==null&&i!==void 0&&i.startsWith(Qt)&&(a=a.replace(Qt,""));const c=r[1]||{},u=this._userModel[a];typeof u=="function"&&await u.call(null,c)}}catch(r){throw it("[shadow sandbox] error",r),r}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){var e;return(e=this._parent)===null||e===void 0?void 0:e.frame.parentNode}_getSandboxShadowContainer(){var e;return(e=this._shadow)===null||e===void 0?void 0:e.frame.parentNode}_getSandboxIframeRoot(){var e;return(e=this._parent)===null||e===void 0?void 0:e.frame}_getSandboxShadowRoot(){var e;return(e=this._shadow)===null||e===void 0?void 0:e.frame}set debugTag(e){this._debugTag=e}async destroy(){var e;let n=null;this._parent&&(n=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(n=this._getSandboxShadowContainer(),this._shadow.destroy()),(e=n)===null||e===void 0||e.parentNode.removeChild(n)}}function sr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class ar{constructor(e,n){sr(this,"ctx",void 0),sr(this,"opts",void 0),this.ctx=e,this.opts=n}get ctxId(){return this.ctx.baseInfo.id}setItem(e,n){var r;return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,n,(r=this.opts)===null||r===void 0?void 0:r.assets]})}getItem(e){var n;return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e,(n=this.opts)===null||n===void 0?void 0:n.assets]})}removeItem(e){var n;return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e,(n=this.opts)===null||n===void 0?void 0:n.assets]})}allKeys(){var e;return this.ctx.caller.callAsync("api:call",{method:"list-plugin-storage-files",args:[this.ctxId,(e=this.opts)===null||e===void 0?void 0:e.assets]})}clear(){var e;return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId,(e=this.opts)===null||e===void 0?void 0:e.assets]})}hasItem(e){var n;return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e,(n=this.opts)===null||n===void 0?void 0:n.assets]})}}class qr{constructor(e){var n,r,i;i=void 0,(r="ctx")in(n=this)?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.ctx=e}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(e,...n){var r,i;const a=this.ensureHostScope();return e=(r=o(e))===null||r===void 0?void 0:r.toLowerCase(),(i=a.logseq.api["exper_"+e])===null||i===void 0?void 0:i.apply(a,n)}async loadScripts(...e){(e=e.map(n=>n!=null&&n.startsWith("http")?n:this.ctx.resolveResourceFullUrl(n))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...e)}registerFencedCodeRenderer(e,n){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,e,n)}registerExtensionsEnhancer(e,n){const r=this.ensureHostScope();return e==="katex"&&r.katex&&n(r.katex).catch(console.error),r.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,e,n)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}function It(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const cr=t=>`task_callback_${t}`;class Wr{constructor(e,n,r={}){It(this,"_client",void 0),It(this,"_requestId",void 0),It(this,"_requestOptions",void 0),It(this,"_promise",void 0),It(this,"_aborted",!1),this._client=e,this._requestId=n,this._requestOptions=r,this._promise=new Promise((u,d)=>{if(!this._requestId)return d(null);this._client.once(cr(this._requestId),E=>{E&&E instanceof Error?d(E):u(E)})});const{success:i,fail:a,final:c}=this._requestOptions;this._promise.then(u=>{i?.(u)}).catch(u=>{a?.(u)}).finally(()=>{c?.()})}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class Gn extends Kt.EventEmitter{constructor(e){super(),It(this,"_ctx",void 0),this._ctx=e,this.ctx.caller.on("#lsp#request#callback",n=>{const r=n?.requestId;r&&this.emit(cr(r),n?.payload)})}static createRequestTask(e,n,r){return new Wr(e,n,r)}async _request(e){const n=this.ctx.baseInfo.id,{success:r,fail:i,final:a,...c}=e,u=this.ctx.Experiments.invokeExperMethod("request",n,c),d=Gn.createRequestTask(this.ctx.Request,u,e);return c.abortable?d:d.promise}get ctx(){return this._ctx}}const Gr=xt(Object.keys,Object);var Jr=Object.prototype.hasOwnProperty;const Zr=function(t){if(!Dt(t))return Gr(t);var e=[];for(var n in Object(t))Jr.call(t,n)&&n!="constructor"&&e.push(n);return e},Jn=function(t){return Ct(t)?jt(t):Zr(t)},Vr=function(t,e){return t&&tn(t,e,Jn)},Kr=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Yr=function(t){return this.__data__.has(t)};function wn(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Ie;++e<n;)this.add(t[e])}wn.prototype.add=wn.prototype.push=Kr,wn.prototype.has=Yr;const Qr=wn,Xr=function(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},eo=function(t,e){return t.has(e)},lr=function(t,e,n,r,i,a){var c=1&n,u=t.length,d=e.length;if(u!=d&&!(c&&d>u))return!1;var E=a.get(t),k=a.get(e);if(E&&k)return E==e&&k==t;var T=-1,$=!0,G=2&n?new Qr:void 0;for(a.set(t,e),a.set(e,t);++T<u;){var z=t[T],ee=e[T];if(r)var le=c?r(ee,z,T,e,t,a):r(z,ee,T,t,e,a);if(le!==void 0){if(le)continue;$=!1;break}if(G){if(!Xr(e,function(Se,Be){if(!eo(G,Be)&&(z===Se||i(z,Se,n,r,a)))return G.push(Be)})){$=!1;break}}else if(z!==ee&&!i(z,ee,n,r,a)){$=!1;break}}return a.delete(t),a.delete(e),$},to=function(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n},no=function(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n};var ur=l?l.prototype:void 0,Zn=ur?ur.valueOf:void 0;const ro=function(t,e,n,r,i,a,c){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new _t(t),new _t(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return S(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var u=to;case"[object Set]":var d=1&r;if(u||(u=no),t.size!=e.size&&!d)return!1;var E=c.get(t);if(E)return E==e;r|=2,c.set(t,e);var k=lr(u(t),u(e),r,i,a,c);return c.delete(t),k;case"[object Symbol]":if(Zn)return Zn.call(t)==Zn.call(e)}return!1},oo=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},io=function(t,e,n){var r=e(t);return Ae(t)?r:oo(r,n(t))},so=function(t,e){for(var n=-1,r=t==null?0:t.length,i=0,a=[];++n<r;){var c=t[n];e(c,n,t)&&(a[i++]=c)}return a},ao=function(){return[]};var co=Object.prototype.propertyIsEnumerable,fr=Object.getOwnPropertySymbols;const lo=fr?function(t){return t==null?[]:(t=Object(t),so(fr(t),function(e){return co.call(t,e)}))}:ao,pr=function(t){return io(t,Jn,lo)};var uo=Object.prototype.hasOwnProperty;const fo=function(t,e,n,r,i,a){var c=1&n,u=pr(t),d=u.length;if(d!=pr(e).length&&!c)return!1;for(var E=d;E--;){var k=u[E];if(!(c?k in e:uo.call(e,k)))return!1}var T=a.get(t),$=a.get(e);if(T&&$)return T==e&&$==t;var G=!0;a.set(t,e),a.set(e,t);for(var z=c;++E<d;){var ee=t[k=u[E]],le=e[k];if(r)var Se=c?r(le,ee,k,e,t,a):r(ee,le,k,t,e,a);if(!(Se===void 0?ee===le||i(ee,le,n,r,a):Se)){G=!1;break}z||(z=k=="constructor")}if(G&&!z){var Be=t.constructor,Sn=e.constructor;Be==Sn||!("constructor"in t)||!("constructor"in e)||typeof Be=="function"&&Be instanceof Be&&typeof Sn=="function"&&Sn instanceof Sn||(G=!1)}return a.delete(t),a.delete(e),G},Vn=Ce(s,"DataView"),Kn=Ce(s,"Promise"),Yn=Ce(s,"Set"),Qn=Ce(s,"WeakMap");var hr="[object Map]",dr="[object Promise]",mr="[object Set]",gr="[object WeakMap]",vr="[object DataView]",po=W(Vn),ho=W(je),mo=W(Kn),go=W(Yn),vo=W(Qn),vt=se;(Vn&&vt(new Vn(new ArrayBuffer(1)))!=vr||je&&vt(new je)!=hr||Kn&&vt(Kn.resolve())!=dr||Yn&&vt(new Yn)!=mr||Qn&&vt(new Qn)!=gr)&&(vt=function(t){var e=se(t),n=e=="[object Object]"?t.constructor:void 0,r=n?W(n):"";if(r)switch(r){case po:return vr;case ho:return hr;case mo:return dr;case go:return mr;case vo:return gr}return e});const yr=vt;var br="[object Arguments]",_r="[object Array]",xn="[object Object]",wr=Object.prototype.hasOwnProperty;const yo=function(t,e,n,r,i,a){var c=Ae(t),u=Ae(e),d=c?_r:yr(t),E=u?_r:yr(e),k=(d=d==br?xn:d)==xn,T=(E=E==br?xn:E)==xn,$=d==E;if($&&lt(t)){if(!lt(e))return!1;c=!0,k=!1}if($&&!k)return a||(a=new Ge),c||pt(t)?lr(t,e,n,r,i,a):ro(t,e,d,n,r,i,a);if(!(1&n)){var G=k&&wr.call(t,"__wrapped__"),z=T&&wr.call(e,"__wrapped__");if(G||z){var ee=G?t.value():t,le=z?e.value():e;return a||(a=new Ge),i(ee,le,n,r,a)}}return!!$&&(a||(a=new Ge),fo(t,e,n,r,i,a))},xr=function t(e,n,r,i,a){return e===n||(e==null||n==null||!Pe(e)&&!Pe(n)?e!=e&&n!=n:yo(e,n,r,i,t,a))},bo=function(t,e,n,r){var i=n.length,a=i;if(t==null)return!a;for(t=Object(t);i--;){var c=n[i];if(c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++i<a;){var u=(c=n[i])[0],d=t[u],E=c[1];if(c[2]){if(d===void 0&&!(u in t))return!1}else{var k=new Ge,T;if(!(T===void 0?xr(E,d,3,r,k):T))return!1}}return!0},Cr=function(t){return t==t&&!ke(t)},_o=function(t){for(var e=Jn(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Cr(i)]}return e},Or=function(t,e){return function(n){return n!=null&&n[t]===e&&(e!==void 0||t in Object(n))}},wo=function(t){var e=_o(t);return e.length==1&&e[0][2]?Or(e[0][0],e[0][1]):function(n){return n===t||bo(n,t,e)}},Xn=function(t){return typeof t=="symbol"||Pe(t)&&se(t)=="[object Symbol]"};var xo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Co=/^\w*$/;const er=function(t,e){if(Ae(t))return!1;var n=typeof t;return!(n!="number"&&n!="symbol"&&n!="boolean"&&t!=null&&!Xn(t))||Co.test(t)||!xo.test(t)||e!=null&&t in Object(e)};function tr(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var c=t.apply(this,r);return n.cache=a.set(i,c)||a,c};return n.cache=new(tr.Cache||Ie),n}tr.Cache=Ie;const Oo=tr;var So=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jo=/\\(\\)?/g;const Ao=function(t){var e=Oo(t,function(r){return n.size===500&&n.clear(),r}),n=e.cache;return e}(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(So,function(n,r,i,a){e.push(i?a.replace(jo,"$1"):r||n)}),e}),ko=function(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i};var Sr=l?l.prototype:void 0,jr=Sr?Sr.toString:void 0;const Eo=function t(e){if(typeof e=="string")return e;if(Ae(e))return ko(e,t)+"";if(Xn(e))return jr?jr.call(e):"";var n=e+"";return n=="0"&&1/e==-1/0?"-0":n},To=function(t){return t==null?"":Eo(t)},Ar=function(t,e){return Ae(t)?t:er(t,e)?[t]:Ao(To(t))},Cn=function(t){if(typeof t=="string"||Xn(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e},kr=function(t,e){for(var n=0,r=(e=Ar(e,t)).length;t!=null&&n<r;)t=t[Cn(e[n++])];return n&&n==r?t:void 0},Io=function(t,e,n){var r=t==null?void 0:kr(t,e);return r===void 0?n:r},Fo=function(t,e){return t!=null&&e in Object(t)},Lo=function(t,e,n){for(var r=-1,i=(e=Ar(e,t)).length,a=!1;++r<i;){var c=Cn(e[r]);if(!(a=t!=null&&n(t,c)))break;t=t[c]}return a||++r!=i?a:!!(i=t==null?0:t.length)&&$t(i)&&ht(c,i)&&(Ae(t)||Qe(t))},No=function(t,e){return t!=null&&Lo(t,e,Fo)},Mo=function(t,e){return er(t)&&Cr(e)?Or(Cn(t),e):function(n){var r=Io(n,t);return r===void 0&&r===e?No(n,t):xr(e,r,3)}},Po=function(t){return function(e){return e?.[t]}},Ro=function(t){return function(e){return kr(e,t)}},Do=function(t){return er(t)?Po(Cn(t)):Ro(t)},Uo=function(t){return typeof t=="function"?t:t==null?Zt:typeof t=="object"?Ae(t)?Mo(t[0],t[1]):wo(t):Do(t)},$o=function(t,e){var n={};return e=Uo(e),Vr(t,function(r,i,a){bt(n,e(r,i,a),r)}),n};function Er(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class zo{constructor(e,n){Er(this,"ctx",void 0),Er(this,"serviceHooks",void 0),this.ctx=e,this.serviceHooks=n,e._execCallableAPI("register-search-service",e.baseInfo.id,n.name,n.options),Object.entries({query:{f:"onQuery",args:["graph","q",!0],reply:!0,transformOutput:r=>(Ae(r?.blocks)&&(r.blocks=r.blocks.map(i=>i&&$o(i,(a,c)=>`block/${c}`))),r)},rebuildBlocksIndice:{f:"onIndiceInit",args:["graph","blocks"]},transactBlocks:{f:"onBlocksChanged",args:["graph","data"]},truncateBlocks:{f:"onIndiceReset",args:["graph"]},removeDb:{f:"onGraph",args:["graph"]}}).forEach(([r,i])=>{const a=(c=>`service:search:${c}:${n.name}`)(r);e.caller.on(a,async c=>{if(f(n?.[i.f])){let u=null;try{u=await n[i.f].apply(n,(i.args||[]).map(d=>{if(c){if(d===!0)return c;if(c.hasOwnProperty(d)){const E=c[d];return delete c[d],E}}})),i.transformOutput&&(u=i.transformOutput(u))}catch(d){console.error("[SearchService] ",d),u=d}finally{i.reply&&e.caller.call(`${a}:reply`,u)}}})})}}function De(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Ho=Symbol.for("proxy-continue"),Bo=ot()("LSPlugin:user"),Tr=new _("",{console:!0});function Ft(t,e,n){var r;if(typeof n!="function")return!1;const{key:i,label:a,desc:c,palette:u,keybinding:d,extras:E}=e,k=`SimpleCommandHook${i}${++Lr}`;this.Editor["on"+k](n),(r=this.caller)===null||r===void 0||r.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:i,label:a,type:t,desc:c,keybinding:d,extras:E},["editor/hook",k]],u]})}function Ir(t){return!(typeof(e=t)!="string"||e.length!==36||!/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(e))||(Tr.error(`#${t} is not a valid UUID string.`),!1);var e}let On=null,Fr=new Map;const qo={async getInfo(t){return On||(On=await this._execCallableAPIAsync("get-app-info")),typeof t=="string"?On[t]:On},registerCommand:Ft,registerSearchService(t){if(Fr.has(t.name))throw new Error(`SearchService: #${t.name} has registered!`);Fr.set(t.name,new zo(this,t))},registerCommandPalette(t,e){const{key:n,label:r,keybinding:i}=t;return Ft.call(this,"$palette$",{key:n,label:r,palette:!0,keybinding:i},e)},registerCommandShortcut(t,e){const{binding:n}=t,r="$shortcut$",i=r+o(n);return Ft.call(this,r,{key:i,palette:!1,keybinding:t},e)},registerUIItem(t,e){var n;const r=this.baseInfo.id;(n=this.caller)===null||n===void 0||n.call("api:call",{method:"register-plugin-ui-item",args:[r,t,e]})},registerPageMenuItem(t,e){if(typeof e!="function")return!1;const n=t+"_"+this.baseInfo.id,r=t;Ft.call(this,"page-menu-item",{key:n,label:r},e)},onBlockRendererSlotted(t,e){if(!Ir(t))return;const n=this.baseInfo.id,r=`hook:editor:${o(`slot:${t}`)}`;return this.caller.on(r,e),this.App._installPluginHook(n,r),()=>{this.caller.off(r,e),this.App._uninstallPluginHook(n,r)}},invokeExternalPlugin(t,...e){var n;if(!(t=(n=t)===null||n===void 0?void 0:n.trim()))return;let[r,i]=t.split(".");if(!["models","commands"].includes(i?.toLowerCase()))throw new Error("Type only support '.models' or '.commands' currently.");const a=t.replace(`${r}.${i}.`,"");if(!r||!i||!a)throw new Error(`Illegal type of #${t} to invoke external plugin.`);return this._execCallableAPIAsync("invoke_external_plugin_cmd",r,i.toLowerCase(),a,e)},setFullScreen(t){const e=(...n)=>this._callWin("setFullScreen",...n);t==="toggle"?this._callWin("isFullScreen").then(n=>{n?e():e(!0)}):t?e(!0):e()}};let Lr=0;const Wo={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(t,e){var n;Bo("Register slash command #",this.baseInfo.id,t,e),typeof e=="function"&&(e=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",e]]),e=e.map(r=>{const[i,...a]=r;if(i==="editor/hook"){let c=a[0],u=()=>{var E;(E=this.caller)===null||E===void 0||E.callUserModel(c)};typeof c=="function"&&(u=c);const d=`SlashCommandHook${i}${++Lr}`;r[1]=d,this.Editor["on"+d](u)}return r}),(n=this.caller)===null||n===void 0||n.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[t,e]]})},registerBlockContextMenuItem(t,e){if(typeof e!="function")return!1;const n=t+"_"+this.baseInfo.id;Ft.call(this,"block-context-menu-item",{key:n,label:t},e)},registerHighlightContextMenuItem(t,e,n){if(typeof e!="function")return!1;const r=t+"_"+this.baseInfo.id;Ft.call(this,"highlight-context-menu-item",{key:r,label:t,extras:n},e)},scrollToBlockInPage(t,e,n){const r="block-content-"+e;n!=null&&n.replaceState?this.App.replaceState("page",{name:t},{anchor:r}):this.App.pushState("page",{name:t},{anchor:r})}},Go={onBlockChanged(t,e){if(!Ir(t))return;const n=this.baseInfo.id,r=`hook:db:${o(`block:${t}`)}`,i=({block:a,txData:c,txMeta:u})=>{a.uuid===t&&e(a,c,u)};return this.caller.on(r,i),this.App._installPluginHook(n,r),()=>{this.caller.off(r,i),this.App._uninstallPluginHook(n,r)}},datascriptQuery(t,...e){return e.pop(),e!=null&&e.some(n=>typeof n=="function")?this.Experiments.ensureHostScope().logseq.api.datascript_query(t,...e):this._execCallableAPIAsync("datascript_query",t,...e)}},Jo={},Zo={},Vo={makeSandboxStorage(){return new ar(this,{assets:!0})}};class nr extends gt(){constructor(e,n){super(),De(this,"_baseInfo",void 0),De(this,"_caller",void 0),De(this,"_version","0.0.14"),De(this,"_debugTag",""),De(this,"_settingsSchema",void 0),De(this,"_connected",!1),De(this,"_ui",new Map),De(this,"_mFileStorage",void 0),De(this,"_mRequest",void 0),De(this,"_mExperiments",void 0),De(this,"_beforeunloadCallback",void 0),this._baseInfo=e,this._caller=n,n.on("sys:ui:visible",r=>{r!=null&&r.toggle&&this.toggleMainUI()}),n.on("settings:changed",r=>{const i=Object.assign({},this.settings),a=Object.assign(this._baseInfo.settings,r);this.emit("settings:changed",{...a},i)}),n.on("beforeunload",async r=>{const{actor:i,...a}=r,c=this._beforeunloadCallback;try{c&&await c(a),i?.resolve(null)}catch(u){console.debug(`${n.debugTag} [beforeunload] `,u),i?.reject(u)}})}async ready(e,n){if(!this._connected)try{var r;typeof e=="function"&&(n=e,e={});let i=await this._caller.connectToParent(e);this._connected=!0,i=O(this._baseInfo,i),(r=i)!==null&&r!==void 0&&r.id&&(this._debugTag=this._caller.debugTag=`#${i.id} [${i.name}]`,this.logger.setTag(this._debugTag)),this._settingsSchema&&(i.settings=function(a,c){const u=(c||[]).reduce((d,E)=>("default"in E&&(d[E.key]=E.default),d),{});return Object.assign(u,a)}(i.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema));try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(a){console.warn(a)}n&&n.call(this,i)}catch(i){console.error(`${this._debugTag} [Ready Error]`,i)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(e){typeof e=="function"&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}useSettingsSchema(e){return this.connected&&this.caller.call("settings:schema",{schema:e,isSync:!0}),this._settingsSchema=e,this}updateSettings(e){this.caller.call("settings:update",e)}onSettingsChanged(e){const n="settings:changed";return this.on(n,e),()=>this.off(n,e)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){const n={key:0,visible:!1,cursor:e?.restoreEditingCursor};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}showMainUI(e){const n={key:0,visible:!0,autoFocus:e?.autoFocus};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}toggleMainUI(){const n=this._ui.get(0);n&&n.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const e=this._ui.get(0);return!!(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get effect(){return(e=this)&&(((n=e.baseInfo)===null||n===void 0?void 0:n.effect)||!((r=e.baseInfo)!==null&&r!==void 0&&r.iir));var e,n,r}get logger(){return Tr}get settings(){var e;return(e=this.baseInfo)===null||e===void 0?void 0:e.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),X(this._baseInfo.lsr,e)}_makeUserProxy(e,n){const r=this,i=this.caller;return new Proxy(e,{get(a,c,u){const d=a[c];return function(...E){if(d){const T=d.apply(r,E.concat(n));if(T!==Ho)return T}if(n){const T=c.toString().match(/^(once|off|on)/i);if(T!=null){const $=T[0].toLowerCase(),G=T.input.slice($.length),z=$==="off",ee=r.baseInfo.id,le=`hook:${n}:${o(G)}`,Se=E[0];i[$](le,Se);const Be=()=>{i.off(le,Se),i.listenerCount(le)||r.App._uninstallPluginHook(ee,le)};return z?void Be():(r.App._installPluginHook(ee,le),Be)}}let k=c;return["git","ui","assets"].includes(n)&&(k=n+"_"+k),i.callAsync("api:call",{tag:n,method:k,args:E})}}})}_execCallableAPIAsync(e,...n){return this._caller.callAsync("api:call",{method:e,args:n})}_execCallableAPI(e,...n){this._caller.call("api:call",{method:e,args:n})}_callWin(...e){return this._execCallableAPIAsync("_callMainWin",...e)}get App(){return this._makeUserProxy(qo,"app")}get Editor(){return this._makeUserProxy(Wo,"editor")}get DB(){return this._makeUserProxy(Go,"db")}get Git(){return this._makeUserProxy(Jo,"git")}get UI(){return this._makeUserProxy(Zo,"ui")}get Assets(){return this._makeUserProxy(Vo,"assets")}get FileStorage(){let e=this._mFileStorage;return e||(e=this._mFileStorage=new ar(this)),e}get Request(){let e=this._mRequest;return e||(e=this._mRequest=new Gn(this)),e}get Experiments(){let e=this._mExperiments;return e||(e=this._mExperiments=new qr(this)),e}}function Nr(t,e){return new nr(t,e)}if(window.__LSP__HOST__==null){const t=new Br(null);window.logseq=Nr({},t)}})(),kn})())})(An,An.exports);An.exports;export{jn as c,Ko as g};
